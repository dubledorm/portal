# README

Заготовка для разработки

Функцинальные возможности:

* User - аутентификация через Device, с подтверждением почтового аккаунта.

* Аутентификация через социальные сети с использованием модуля omniauth. Сейчас работает аутентификация через VK, GitHub, FaceBook

* Раздача прав доступа через cancan. Настройка на изменение собственных объектов и просмотр всех остальных кроме User. User просматривает только создатель.

* Настройка routes на различный набор маршрутов при аутентификации пользователя и без неё

* Подключен active_store

* Модели Gallery + Picture с сохранением картинок в active_store

* Тэгирование объектов. Модель Tag и концерн taggable_concern

* Модель Blog для построения любых текстовых заметок

* Модель Article для постороения списка товаров и услуг

* Подключен ElasticSearch для организации полнотекстового поиска. Настроены модели Blog и Article

* Выставление оценок и оставление отзывов о любом объекте. Модели Grade, GradeAverage (усреднённая оценка по разным пользователям)
grade_concern для подключения к объектам возможности выставлять оценки

* ActiveAdmin для управления и администрирования

* Базовый контроллер ApplicationController. Обрабатывает основные критические ошибки, предоставляет CRUD.

* Контроллер Grade для расчёта средних значений по оценкам объектов

* Контроллер Article, предоставлет CRUD

* Контроллеры Gallery, Picture, User

* HomeController - root страница для не аутентифицированного доступа

* SecretController - root страница после аутентификации

* React, подключен react-rails. Пример компонента в javascript/components

## React
Для создание нового компонента проще использовать генератор 
  rails g react:component HelloWorld greeting:string

The generator also accepts options:

  --es6: use class ComponentName extends React.Component
  
  --coffee: use CoffeeScript

## GradeAverage и Grade
Подробно описаны в исходниках.

К модели, на которую хотим выставлять оценки подключить концерн GradeConcern

Типы оценок выставить под требования в массие GRADE_TYPES в GradeConstConcern.
Для того, чтобы типы оценок выводить в нужной локали нужно выставить в файле human_attribute_value.ru.yml 
их соответствия.

## Tag
Тэги также имеют типы.

Для использования тэгов для пометки объектов используются тэги с типом ordinal

Также тэги могут быть использованы для группировки объектов по каким-либо признакам. Например по категориям.
Список типов надо отредактировать под требования в массиве Tags::TAG_TYPES. Тип ordinal надо в массиве оставить.

Для подключения тэгирования к любой модели нужно подключить к ней концерн TaggableConcern

## Article
Модель для описания представляемого товара или услуги
Типы Article устанавливаются в массиве ARTICLE_TYPES и сейчас имеют два типа - услуга и товар
Для их локализованного вывода надо использовать human_attribute_value(:article_type)

Article имеет состояние. 
Список состояний, при необходимости, нужно актуализовать в массиве ARTICLE_STATES. 
Сейчас состояния: 

* активно
* удалено
* черновик

Для их локализованного вывода надо использовать human_attribute_value(:state)

Позволяет устанавливать аттрибуты:
* min/max количество
* min/max возраст участсников
* продолжительность

Подключен поиск по русскому тексту через ElasticSearch по полям name, main_description, short_description
Поиск настроен на максимальное совпадение с введённой строкой
Для поиска надо использовать Article.search(строка для поиска)

Может иметь одну основную картинку main_image
Также, можно подключить gallery, содержащую дополнительные картинки.

Если требуется выставлять оценки на Article, то подключите к модели 
include GradeConcern
